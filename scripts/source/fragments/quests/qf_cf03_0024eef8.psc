ScriptName Fragments:Quests:QF_CF03_0024EEF8 Extends Quest Const hidden

;-- Variables ---------------------------------------

;-- Properties --------------------------------------
Quest Property CF04 Auto Const mandatory
Quest Property CF05 Auto Const mandatory
Scene Property CF03_Stage140_Mathis_TowerCallout Auto Const mandatory
Scene Property CF03_Stage060_Delgado_AttackScene Auto Const mandatory
Scene Property CF03_Stage135_Mathis_TowerCallout Auto Const mandatory
Scene Property CF03_Stage180_Mathis_CellCallout Auto Const mandatory
Scene Property CF03_Stage175_Mathis_CellCallout Auto Const mandatory
ReferenceAlias Property Alias_CF03_Delgado Auto Const mandatory
ReferenceAlias Property Alias_CF03_Mathis Auto Const mandatory
ObjectReference Property CF03DelgadoShuttleOverlookMarker Auto Const mandatory
ObjectReference Property CF03DelgadoWrapUpMarker Auto Const mandatory
ObjectReference Property CF03NaevaWrapUpMarker Auto Const mandatory
ReferenceAlias Property Alias_CF03_Naeva Auto Const mandatory
ReferenceAlias Property Alias_CF03_Toft Auto Const mandatory
ReferenceAlias Property Alias_CF03_Kibwe Auto Const mandatory
ObjectReference Property CF03ToftWrapUpMarker Auto Const mandatory
ObjectReference Property CF03KibweWrapUpMarker Auto Const mandatory
ObjectReference Property CF03DelgadoStartMarker Auto Const mandatory
ObjectReference Property CF03MathisStartMarker Auto Const mandatory
ObjectReference Property CF03MathisOuterDoorMarker01 Auto Const mandatory
ObjectReference Property CF03DelgadoOuterDoorMarker01 Auto Const mandatory
ObjectReference Property LC030TheLockDoorMainEntranceRef Auto Const mandatory
ObjectReference Property CF03TempCollapseBlockerRef Auto Const mandatory
ObjectReference Property CF03MathisTransferAreaMarker Auto Const mandatory
ObjectReference Property CF03DelgadoTransferAreaMarker Auto Const mandatory
Scene Property CF03_Stage180_Mathis_TowerCellCallout Auto Const mandatory
ObjectReference Property CF03MathisWrapUpMarker Auto Const mandatory
Faction Property PlayerFaction Auto Const mandatory
Faction Property CrimsonFleetFaction Auto Const mandatory
Faction Property UCSysDefFaction Auto Const mandatory
lc030_questscript Property LC030 Auto Const mandatory
Scene Property CF03_Stage100_Delgado_PACallout Auto Const mandatory
GlobalVariable Property CF_SysDefShutdown Auto Const mandatory
ObjectReference Property CF03ControlRoomExitDoorRef Auto Const mandatory
Scene Property CF03_Stage145_Mathis_TowerScenePreCallout Auto Const mandatory
Scene Property CF03_Stage220_Mathis_WardenOfficeCallout Auto Const mandatory
ObjectReference Property CF03DelgadoTransferAreaPAMarker Auto Const mandatory
ObjectReference Property CF03MathisInsideLockEntranceMarkerRef Auto Const mandatory
ObjectReference Property CF03DelgadoInsideLockEntranceMarkerRef Auto Const mandatory
lc082_vigilancequestscript Property LC082 Auto Const mandatory
Key Property LC030_VentilationRoomPassword Auto Const mandatory
Key Property LC030_LockerPasscode Auto Const mandatory
Key Property LC030_LockerCode Auto Const mandatory
Cell Property LC030Lock01 Auto Const mandatory
sq_followersscript Property SQ_Followers Auto Const mandatory
ObjectReference Property CF03MathisTowerOverrideMarker Auto Const mandatory
Scene Property CF03_Stage219_Delgado_WardenPACallout Auto Const mandatory
Quest Property CFKey Auto Const mandatory
Quest Property CF_Main Auto Const mandatory
Scene Property CF03_Stage105_Mathis_WallPanelFallsCallout Auto Const mandatory
ReferenceAlias Property Alias_CF03_GenericAlly01 Auto Const mandatory
ReferenceAlias Property Alias_CF03_GenericAlly02 Auto Const mandatory
ObjectReference Property CF03PlayerStartMarker Auto Const mandatory
ObjectReference Property CF03PlayerOuterDoorMarker Auto Const mandatory
ObjectReference Property CF03PlayerInsideLockMarkerRef Auto Const mandatory
ObjectReference Property CF03PlayerStartInLock Auto Const mandatory
ObjectReference Property CF03PlayerStartAtArmory Auto Const mandatory
ObjectReference Property CF03MathisStartAtArmory Auto Const mandatory
ObjectReference Property CF03MathisCatchupArmoryMarker01 Auto Const mandatory
ObjectReference Property CF03MathisCatchupArmoryMarker02 Auto Const mandatory
Scene Property CF03_Stage211_Mathis_ArmoryScene Auto Const mandatory
ReferenceAlias Property Alias_CF03_ArmoryWeaponCase Auto Const
LeveledItem Property CF03_LLI_MathisMagStorm Auto Const mandatory
LeveledItem Property CF03_LLI_MathisMagStormAmmo Auto Const mandatory
ObjectReference Property CF03PlayerStartAtIntake Auto Const
ObjectReference Property CF03MathisStartAtIntake Auto Const
ObjectReference Property CF03MathisCatchupIntakeMarker Auto Const mandatory
ObjectReference Property CF03PlayerStartAtBarracks Auto Const mandatory
ObjectReference Property CF03MathisStartAtBarracks Auto Const mandatory
ObjectReference Property CF03MathisCatchupBarracksMarker Auto Const mandatory
Scene Property CF03_Stage215_Mathis_BarracksCreatureRush Auto Const mandatory
ObjectReference Property CF03PlayerStartAtWarden Auto Const mandatory
ObjectReference Property CF03MathisStartAtWarden Auto Const mandatory
Weapon Property MagStorm Auto Const mandatory
ObjectReference Property CF03PlayerShuttleStart Auto Const mandatory
ObjectReference Property CF03MathisShuttleStart Auto Const mandatory
Scene Property CF03_Stage085_Mathis_PostCollapseScene Auto Const mandatory
Scene Property CF03_Stage050_StairsScene Auto Const mandatory
ReferenceAlias Property Alias_CF03_Shuttle Auto Const mandatory
ReferenceAlias Property Alias_CF03_TADelgadoIntercom Auto Const mandatory
Scene Property CF03_Stage270_ShuttleAnnounceScene Auto Const mandatory
ReferenceAlias Property Alias_CF03_DeskLamp Auto Const mandatory
ReferenceAlias Property Alias_CF03_DeskLampDummy Auto Const mandatory
ObjectReference Property CF03_PlayerStartKryxCell Auto Const mandatory
ObjectReference Property CF03_MathisStartKryxCell Auto Const mandatory
Scene Property CF03_Stage999_Mathis_OptionalCacheScene Auto Const mandatory
Scene Property CF03_Stage191_Mathis_AfterLogCallout Auto Const mandatory
GlobalVariable Property CF03ActorsUseGroupTravelGlobal Auto Const mandatory
Scene Property CF03_Stage130_EndLockdown Auto Const mandatory
ReferenceAlias Property Alias_CF03_IDReader Auto Const mandatory
ReferenceAlias Property Alias_CF03_MapMarkerRef Auto Const mandatory
Scene Property CF03_Stage040_Delgado_LockExtOutroScene Auto Const mandatory
Scene Property CF03_Stage080_Mathis_CollapseScene Auto Const mandatory
ReferenceAlias Property Alias_CF03_KryxSlate Auto Const mandatory
ReferenceAlias Property Alias_CF03_ExteriorDoor Auto Const mandatory
wwiseevent Property QST_CF03_Stage1_DoorUnlock Auto Const mandatory
wwiseevent Property QST_CF03_Stage3_Ambush Auto Const mandatory
GlobalVariable Property CrimsonFleetCaptainState_Mathis Auto Const mandatory
RefCollectionAlias Property Alias_CF03_TAAmbushSFXMarkerRefCol Auto Const mandatory
ObjectReference Property CF03_WardenExitDoorRef Auto Const mandatory
bescript Property BE_CF03_Shuttle Auto Const mandatory
LeveledItem Property LL_Weapon_Reward_CF03_Kryx Auto Const mandatory
ReferenceAlias Property Alias_CF03_ArmoryWeaponCaseCollision Auto Const mandatory
Location Property LC030LockLocation Auto Const mandatory
Keyword Property SpaceshipPreventRampOpenOnLanding Auto Const mandatory
ObjectReference Property CF03MathisTowerTopOverrideMarker Auto Const mandatory
GlobalVariable Property SE_Player_FAB20_Timestamp Auto Const mandatory
Float Property cooldownDays Auto Const mandatory
Armor Property Spacesuit_CrimsonFleet_Assault_Helmet_NOTPLAYABLE Auto Const mandatory
Outfit Property Outfit_Spacesuit_Elite_CF03_MathisCastillo Auto Const mandatory
wwiseevent Property WwiseEvent_QST_CF03_PryOpenLamp Auto Const mandatory
Float Property waitTime Auto Const mandatory

;-- Functions ---------------------------------------

Function Fragment_Stage_0181_Item_00()
  ; Empty function
EndFunction

Function Fragment_Stage_0212_Item_00()
  ; Empty function
EndFunction

Function Fragment_Stage_0222_Item_00()
  ; Empty function
EndFunction

Function Fragment_Stage_0223_Item_00()
  ; Empty function
EndFunction

Function Fragment_Stage_0255_Item_00()
  ; Empty function
EndFunction

Function Fragment_Stage_0000_Item_00()
  Self.SetStage(9)
  Self.SetStage(20)
  LC030.MoveAlliesToPackageLocations()
  Game.GetPlayer().MoveTo(CF03PlayerStartMarker, 0.0, 0.0, 0.0, True, False)
EndFunction

Function Fragment_Stage_0001_Item_00()
  Self.SetStage(9)
  Self.SetStage(40)
  LC030.MoveAlliesToPackageLocations()
  Game.GetPlayer().MoveTo(CF03PlayerOuterDoorMarker, 0.0, 0.0, 0.0, True, False)
EndFunction

Function Fragment_Stage_0002_Item_00()
  Self.SetStage(9)
  Self.SetStage(50)
  Game.GetPlayer().MoveTo(CF03PlayerInsideLockMarkerRef, 0.0, 0.0, 0.0, True, False)
EndFunction

Function Fragment_Stage_0003_Item_00()
  Self.SetStage(9)
  Self.SetStage(50)
  Self.SetStage(51)
  CF03ActorsUseGroupTravelGlobal.SetValue(0.0)
  Game.GetPlayer().MoveTo(CF03PlayerStartInLock, 0.0, 0.0, 0.0, True, False)
  Utility.Wait(1.0)
  LC030.MoveAlliesToPackageLocations()
EndFunction

Function Fragment_Stage_0004_Item_00()
  Self.SetStage(9)
  Self.SetStage(130)
  Self.SetStage(131)
  LC030.SetStage(20)
  SQ_Followers.SetRoleActive(Alias_CF03_Mathis.GetActorRef(), True, True, 0.0, 0.0)
  SQ_Followers.CommandFollow(Alias_CF03_Mathis.GetActorRef())
  Game.GetPlayer().MoveTo(CF03PlayerStartAtIntake, 0.0, 0.0, 0.0, True, False)
  Alias_CF03_Mathis.TryToMoveTo(CF03MathisStartAtIntake)
  Alias_CF03_Mathis.TryToEvaluatePackage()
  Alias_CF03_GenericAlly01.TryToDisable()
  Alias_CF03_GenericAlly02.TryToDisable()
EndFunction

Function Fragment_Stage_0005_Item_00()
  Self.SetStage(9)
  Self.SetStage(131)
  Self.SetStage(210)
  LC030.SetStage(20)
  SQ_Followers.SetRoleActive(Alias_CF03_Mathis.GetActorRef(), True, True, 0.0, 0.0)
  SQ_Followers.CommandFollow(Alias_CF03_Mathis.GetActorRef())
  Game.GetPlayer().MoveTo(CF03PlayerStartAtArmory, 0.0, 0.0, 0.0, True, False)
  Alias_CF03_Mathis.TryToMoveTo(CF03MathisStartAtArmory)
  Alias_CF03_Mathis.TryToEvaluatePackage()
  Alias_CF03_GenericAlly01.TryToDisable()
  Alias_CF03_GenericAlly02.TryToDisable()
EndFunction

Function Fragment_Stage_0006_Item_00()
  Self.SetStage(9)
  Self.SetStage(131)
  Self.SetStage(210)
  LC030.SetStage(20)
  SQ_Followers.SetRoleActive(Alias_CF03_Mathis.GetActorRef(), True, True, 0.0, 0.0)
  SQ_Followers.CommandFollow(Alias_CF03_Mathis.GetActorRef())
  Game.GetPlayer().MoveTo(CF03PlayerStartAtBarracks, 0.0, 0.0, 0.0, True, False)
  Alias_CF03_Mathis.TryToMoveTo(CF03MathisStartAtBarracks)
  Alias_CF03_Mathis.TryToEvaluatePackage()
  Alias_CF03_GenericAlly01.TryToDisable()
  Alias_CF03_GenericAlly02.TryToDisable()
EndFunction

Function Fragment_Stage_0007_Item_00()
  Self.SetStage(9)
  Self.SetStage(131)
  Self.SetStage(210)
  LC030.SetStage(20)
  SQ_Followers.SetRoleActive(Alias_CF03_Mathis.GetActorRef(), True, True, 0.0, 0.0)
  SQ_Followers.CommandFollow(Alias_CF03_Mathis.GetActorRef())
  Game.GetPlayer().MoveTo(CF03PlayerStartAtWarden, 0.0, 0.0, 0.0, True, False)
  Alias_CF03_Mathis.TryToMoveTo(CF03MathisStartAtWarden)
  Alias_CF03_Mathis.TryToEvaluatePackage()
  Alias_CF03_GenericAlly01.TryToDisable()
  Alias_CF03_GenericAlly02.TryToDisable()
EndFunction

Function Fragment_Stage_0008_Item_00()
  Self.SetStage(9)
  Self.SetStage(131)
  Self.SetStage(222)
  LC030.SetStage(20)
  SQ_Followers.SetRoleActive(Alias_CF03_Mathis.GetActorRef(), True, True, 0.0, 0.0)
  SQ_Followers.CommandFollow(Alias_CF03_Mathis.GetActorRef())
  Game.GetPlayer().MoveTo(CF03PlayerShuttleStart, 0.0, 0.0, 0.0, True, False)
  Alias_CF03_Mathis.TryToMoveTo(CF03MathisShuttleStart)
  Alias_CF03_Mathis.TryToEvaluatePackage()
  Alias_CF03_GenericAlly01.TryToDisable()
  Alias_CF03_GenericAlly02.TryToDisable()
  Self.SetStage(270)
EndFunction

Function Fragment_Stage_0009_Item_00()
  CF_Main.SetStage(1)
  Self.SetStage(15)
  LC030LockLocation.Reset()
  LC030.Start()
EndFunction

Function Fragment_Stage_0010_Item_00()
  Self.SetObjectiveDisplayed(10, True, False)
  ObjectReference LockMapMarkerRef = Alias_CF03_MapMarkerRef.GetRef()
  LockMapMarkerRef.AddToMapScanned(True)
  LockMapMarkerRef.SetRequiresScanning(False)
  LC030.Start()
  Self.SetActive(True)
EndFunction

Function Fragment_Stage_0011_Item_00()
  Self.SetStage(9)
  Self.SetStage(131)
  Self.SetStage(223)
  Self.SetStage(270)
  LC030.SetStage(20)
  SQ_Followers.SetRoleActive(Alias_CF03_Mathis.GetActorRef(), True, True, 0.0, 0.0)
  SQ_Followers.CommandFollow(Alias_CF03_Mathis.GetActorRef())
  Game.GetPlayer().MoveTo(CF03PlayerShuttleStart, 0.0, 0.0, 0.0, True, False)
  Alias_CF03_Mathis.TryToMoveTo(CF03MathisShuttleStart)
  Alias_CF03_Mathis.TryToEvaluatePackage()
  Alias_CF03_GenericAlly01.TryToDisable()
  Alias_CF03_GenericAlly02.TryToDisable()
EndFunction

Function Fragment_Stage_0012_Item_00()
  Self.SetStage(9)
  LC030.SetStage(413)
  Self.SetStage(176)
  SQ_Followers.SetRoleActive(Alias_CF03_Mathis.GetActorRef(), True, True, 0.0, 0.0)
  SQ_Followers.CommandFollow(Alias_CF03_Mathis.GetActorRef())
  Game.GetPlayer().MoveTo(CF03_PlayerStartKryxCell, 0.0, 0.0, 0.0, True, False)
  Alias_CF03_Mathis.TryToMoveTo(CF03_MathisStartKryxCell)
  Alias_CF03_Mathis.TryToEvaluatePackage()
EndFunction

Function Fragment_Stage_0013_Item_00()
  Self.SetStage(10)
  Self.SetStage(9)
EndFunction

Function Fragment_Stage_0015_Item_00()
  Actor delgadoRef = Alias_CF03_Delgado.GetActorRef()
  delgadoRef.Reset(None)
  delgadoRef.MoveTo(CF03DelgadoStartMarker, 0.0, 0.0, 0.0, True, False)
  delgadoRef.EvaluatePackage(False)
  Actor mathisRef = Alias_CF03_Mathis.GetActorRef()
  mathisRef.Reset(None)
  mathisRef.MoveTo(CF03MathisStartMarker, 0.0, 0.0, 0.0, True, False)
  mathisRef.EvaluatePackage(False)
  Alias_CF03_GenericAlly01.TryToEnable()
  Alias_CF03_GenericAlly01.TryToEvaluatePackage()
  Alias_CF03_GenericAlly02.TryToEnable()
  Alias_CF03_GenericAlly02.TryToEvaluatePackage()
EndFunction

Function Fragment_Stage_0018_Item_00()
  If Self.IsObjectiveDisplayed(410) == True
    Self.SetObjectiveDisplayed(410, False, False)
    Self.SetStage(1000)
  EndIf
  If Self.IsObjectiveDisplayed(420) == True
    Self.SetObjectiveDisplayed(420, False, False)
    Self.SetStage(1000)
  EndIf
EndFunction

Function Fragment_Stage_0020_Item_00()
  Self.SetObjectiveCompleted(10, True)
  Self.SetObjectiveDisplayed(20, True, False)
  Self.SetStage(15)
EndFunction

Function Fragment_Stage_0030_Item_00()
  Self.SetObjectiveCompleted(20, True)
  Self.SetObjectiveDisplayed(30, True, False)
  Alias_CF03_Delgado.GetActorRef().EvaluatePackage(False)
  Alias_CF03_Mathis.GetActorRef().EvaluatePackage(False)
  Utility.Wait(waitTime)
  LC030.EVPAllies()
  LC030.StartExteriorMonitor()
EndFunction

Function Fragment_Stage_0040_Item_00()
  Self.SetObjectiveCompleted(30, True)
  Self.SetObjectiveDisplayed(40, True, False)
  LC030.SetStage(15)
  Utility.Wait(3.0)
  Alias_CF03_Delgado.GetActorRef().EvaluatePackage(False)
  Alias_CF03_Mathis.GetActorRef().EvaluatePackage(False)
  Alias_CF03_GenericAlly01.GetActorRef().EvaluatePackage(False)
  Alias_CF03_GenericAlly02.GetActorRef().EvaluatePackage(False)
EndFunction

Function Fragment_Stage_0041_Item_00()
  LC030.EndExteriorMonitorNoWait()
  LC030.RegisterForDelgadoUsingIDCardReader()
  Self.SetObjectiveCompleted(40, True)
  Self.SetObjectiveDisplayed(45, True, False)
EndFunction

Function Fragment_Stage_0048_Item_00()
  Utility.Wait(0.449999988)
  Alias_CF03_IDReader.GetRef().PlayAnimation("CardSwiped")
  Utility.Wait(0.550000012)
  QST_CF03_Stage1_DoorUnlock.Play(Alias_CF03_ExteriorDoor.GetRef(), None, None)
EndFunction

Function Fragment_Stage_0050_Item_00()
  Self.SetStageNoWait(48)
  Self.SetObjectiveCompleted(45, True)
  Self.SetObjectiveDisplayed(50, True, False)
  LC030TheLockDoorMainEntranceRef.Unlock(False)
  LC030TheLockDoorMainEntranceRef.SetLockLevel(0)
  Utility.Wait(1.0)
  Alias_CF03_Delgado.GetActorRef().EvaluatePackage(False)
  Alias_CF03_Mathis.GetActorRef().EvaluatePackage(False)
  Alias_CF03_GenericAlly01.GetActorRef().EvaluatePackage(False)
  Alias_CF03_GenericAlly02.GetActorRef().EvaluatePackage(False)
EndFunction

Function Fragment_Stage_0051_Item_00()
  CF03_Stage040_Delgado_LockExtOutroScene.Stop()
  LC030.MoveAlliesIntoLock()
  Utility.Wait(8.0)
  If !Self.GetStageDone(3)
    CF03_Stage050_StairsScene.Start()
  EndIf
EndFunction

Function Fragment_Stage_0052_Item_00()
  If Self.GetStageDone(52) == True && Self.GetStageDone(54) == True && Self.GetStageDone(56) == True
    Self.SetStage(60)
  EndIf
EndFunction

Function Fragment_Stage_0054_Item_00()
  If Self.GetStageDone(52) == True && Self.GetStageDone(54) == True && Self.GetStageDone(56) == True
    Self.SetStage(60)
  EndIf
EndFunction

Function Fragment_Stage_0056_Item_00()
  If Self.GetStageDone(52) == True && Self.GetStageDone(54) == True && Self.GetStageDone(56) == True
    Self.SetStage(60)
  EndIf
EndFunction

Function Fragment_Stage_0060_Item_00()
  Self.SetObjectiveCompleted(50, True)
  Self.SetObjectiveDisplayed(60, True, False)
  CF03_Stage060_Delgado_AttackScene.Start()
  Alias_CF03_Delgado.GetActorRef().EvaluatePackage(False)
  Alias_CF03_Mathis.GetActorRef().EvaluatePackage(False)
  Alias_CF03_GenericAlly01.GetActorRef().EvaluatePackage(False)
  Alias_CF03_GenericAlly02.GetActorRef().EvaluatePackage(False)
EndFunction

Function Fragment_Stage_0063_Item_00()
  ObjectReference[] tunnelingSFXMarkerRefs = Alias_CF03_TAAmbushSFXMarkerRefCol.GetArray()
  Int I = 0
  While I < tunnelingSFXMarkerRefs.Length
    QST_CF03_Stage3_Ambush.Play(tunnelingSFXMarkerRefs[I], None, None)
    I += 1
  EndWhile
EndFunction

Function Fragment_Stage_0065_Item_00()
  LC030.SetStage(210)
EndFunction

Function Fragment_Stage_0070_Item_00()
  Self.SetObjectiveCompleted(60, True)
  Self.SetObjectiveDisplayed(70, True, False)
  LC030.EVPAllies()
EndFunction

Function Fragment_Stage_0080_Item_00()
  Self.SetObjectiveCompleted(70, True)
  Self.SetObjectiveDisplayed(80, True, False)
  LC030.EVPAllies()
EndFunction

Function Fragment_Stage_0081_Item_00()
  Alias_CF03_Mathis.GetActorRef().EvaluatePackage(False)
EndFunction

Function Fragment_Stage_0085_Item_00()
  CF03_Stage080_Mathis_CollapseScene.Start()
EndFunction

Function Fragment_Stage_0090_Item_00()
  Alias_CF03_Mathis.GetActorRef().EvaluatePackage(False)
  Self.SetObjectiveDisplayed(80, False, False)
  Self.SetObjectiveDisplayed(90, True, False)
  Alias_CF03_Delgado.TryToMoveTo(CF03DelgadoTransferAreaPAMarker)
  Alias_CF03_Delgado.TryToEvaluatePackage()
EndFunction

Function Fragment_Stage_0100_Item_00()
  Self.SetObjectiveCompleted(90, True)
  Self.SetObjectiveDisplayed(80, True, False)
  SQ_Followers.SetRoleActive(Alias_CF03_Mathis.GetActorRef(), True, True, 0.0, 0.0)
  SQ_Followers.CommandFollow(Alias_CF03_Mathis.GetActorRef())
  LC030.SetStage(260)
  LC030.SetStage(270)
EndFunction

Function Fragment_Stage_0105_Item_00()
  CF03_Stage105_Mathis_WallPanelFallsCallout.Start()
EndFunction

Function Fragment_Stage_0107_Item_00()
  LC030.SetStage(279)
EndFunction

Function Fragment_Stage_0110_Item_00()
  Self.SetObjectiveCompleted(80, True)
  Self.SetObjectiveDisplayed(110, True, False)
  CF03_Stage100_Delgado_PACallout.Start()
EndFunction

Function Fragment_Stage_0115_Item_00()
  CF03_Stage100_Delgado_PACallout.Stop()
EndFunction

Function Fragment_Stage_0120_Item_00()
  Self.SetObjectiveCompleted(110, True)
  Self.SetObjectiveDisplayed(120, True, False)
EndFunction

Function Fragment_Stage_0130_Item_00()
  Self.SetObjectiveCompleted(120, True)
  Self.SetObjectiveDisplayed(130, True, False)
  LC030.SetStage(280)
  CF03_Stage130_EndLockdown.Start()
  Alias_CF03_Delgado.GetActorRef().EvaluatePackage(False)
  Alias_CF03_Mathis.GetActorRef().EvaluatePackage(False)
EndFunction

Function Fragment_Stage_0131_Item_00()
  LC030.CollapseCeiling(True)
  Alias_CF03_Delgado.GetActorRef().Disable(False)
  Alias_CF03_Delgado.GetActorRef().MoveTo(CF03DelgadoShuttleOverlookMarker, 0.0, 0.0, 0.0, True, False)
EndFunction

Function Fragment_Stage_0132_Item_00()
  Actor playerRef = Game.GetPlayer()
  Actor mathisRef = Alias_CF03_Mathis.GetActorRef()
  If !playerRef.HasDetectionLOS(mathisRef as ObjectReference) && !playerRef.HasDetectionLOS(CF03MathisCatchupIntakeMarker) && playerRef.GetDistance(mathisRef as ObjectReference) > 8.0
    mathisRef.MoveTo(CF03MathisCatchupIntakeMarker, 0.0, 0.0, 0.0, True, False)
  EndIf
EndFunction

Function Fragment_Stage_0135_Item_00()
  LC030.SetStageNoWait(300)
EndFunction

Function Fragment_Stage_0136_Item_00()
  CF03_Stage135_Mathis_TowerCallout.Start()
  If !Self.GetStageDone(131)
    Self.SetStage(131)
  EndIf
EndFunction

Function Fragment_Stage_0140_Item_00()
  Self.SetObjectiveCompleted(130, True)
  Self.SetObjectiveDisplayed(140, True, False)
  Alias_CF03_Mathis.GetActorRef().EvaluatePackage(False)
EndFunction

Function Fragment_Stage_0145_Item_00()
  Actor playerRef = Game.GetPlayer()
  Actor mathisRef = Alias_CF03_Mathis.GetActorRef()
  If !playerRef.HasDetectionLOS(mathisRef as ObjectReference) && !playerRef.HasDetectionLOS(CF03MathisTowerOverrideMarker) && playerRef.GetDistance(mathisRef as ObjectReference) > 8.0
    mathisRef.MoveTo(CF03MathisTowerOverrideMarker, 0.0, 0.0, 0.0, True, False)
  EndIf
  CF03_Stage145_Mathis_TowerScenePreCallout.Start()
EndFunction

Function Fragment_Stage_0150_Item_00()
  Self.SetObjectiveCompleted(140, True)
  Self.SetObjectiveDisplayed(150, True, False)
  Actor playerRef = Game.GetPlayer()
  Actor mathisRef = Alias_CF03_Mathis.GetActorRef()
  If !playerRef.HasDetectionLOS(mathisRef as ObjectReference) && !playerRef.HasDetectionLOS(CF03MathisTowerTopOverrideMarker) && playerRef.GetDistance(mathisRef as ObjectReference) > 8.0
    mathisRef.MoveTo(CF03MathisTowerTopOverrideMarker, 0.0, 0.0, 0.0, True, False)
  EndIf
  SQ_Followers.SetRoleInactive(Alias_CF03_Mathis.GetActorRef(), True, False, True)
  mathisRef.StopCombat()
  mathisRef.EvaluatePackage(False)
  LC030.TryToStopCombatInFissure()
  mathisRef.StopCombat()
  mathisRef.EvaluatePackage(False)
EndFunction

Function Fragment_Stage_0160_Item_00()
  Alias_CF03_Mathis.GetActorRef().EvaluatePackage(False)
EndFunction

Function Fragment_Stage_0170_Item_00()
  Self.SetObjectiveCompleted(150, True)
  Self.SetObjectiveDisplayed(170, True, False)
  Alias_CF03_Mathis.GetActorRef().EvaluatePackage(False)
  SQ_Followers.SetRoleActive(Alias_CF03_Mathis.GetActorRef(), True, True, 0.0, 0.0)
  SQ_Followers.CommandFollow(Alias_CF03_Mathis.GetActorRef())
EndFunction

Function Fragment_Stage_0171_Item_00()
  Self.SetObjectiveDisplayed(171, True, False)
EndFunction

Function Fragment_Stage_0172_Item_00()
  CF03_Stage999_Mathis_OptionalCacheScene.Start()
  Self.SetObjectiveCompleted(171, True)
EndFunction

Function Fragment_Stage_0175_Item_00()
  Self.SetObjectiveCompleted(170, True)
  If Self.GetStageDone(176) == False
    Self.SetObjectiveDisplayed(175, True, False)
  EndIf
  If Self.GetStageDone(176) == True
    If Self.GetStageDone(177) == False
      Self.SetObjectiveDisplayed(176, True, False)
    ElseIf Self.GetStageDone(177) == True
      Self.SetStage(180)
    EndIf
  EndIf
  CF03_Stage180_Mathis_TowerCellCallout.Start()
  If Self.IsObjectiveDisplayed(150) == True
    Self.SetObjectiveDisplayed(150, False, False)
  EndIf
EndFunction

Function Fragment_Stage_0176_Item_00()
  If Self.GetStageDone(175) == True
    Self.SetObjectiveCompleted(175, True)
    If Self.GetStageDone(177) == False
      Self.SetObjectiveDisplayed(176, True, False)
    ElseIf Self.GetStageDone(177) == True
      Self.SetStage(180)
    EndIf
  EndIf
  If Self.GetStageDone(170) == False
    SQ_Followers.SetRoleActive(Alias_CF03_Mathis.GetActorRef(), True, True, 0.0, 0.0)
    SQ_Followers.CommandFollow(Alias_CF03_Mathis.GetActorRef())
  EndIf
EndFunction

Function Fragment_Stage_0177_Item_00()
  Self.SetStage(180)
EndFunction

Function Fragment_Stage_0180_Item_00()
  Quest __temp = Self as Quest
  cf03questscript kmyQuest = __temp as cf03questscript
  If Self.IsObjectiveDisplayed(170) == True
    Self.SetObjectiveDisplayed(170, False, False)
  EndIf
  If Self.IsObjectiveDisplayed(175) == True
    Self.SetObjectiveCompleted(175, True)
  EndIf
  If Self.IsObjectiveDisplayed(176) == True
    Self.SetObjectiveCompleted(176, True)
  EndIf
  Self.SetObjectiveDisplayed(180, True, False)
  kmyQuest.WaitQT()
EndFunction

Function Fragment_Stage_0182_Item_00()
  CF03_Stage175_Mathis_CellCallout.Start()
EndFunction

Function Fragment_Stage_0183_Item_00()
  ObjectReference kryxSlateRef = Alias_CF03_KryxSlate.GetRef()
  kryxSlateRef.Enable(False)
  WwiseEvent_QST_CF03_PryOpenLamp.Play(kryxSlateRef, None, None)
  Alias_CF03_DeskLamp.GetRef().Disable(False)
  Alias_CF03_DeskLampDummy.GetRef().Enable(False)
EndFunction

Function Fragment_Stage_0185_Item_00()
  Self.SetObjectiveCompleted(180, True)
  Self.SetObjectiveDisplayed(185, True, False)
EndFunction

Function Fragment_Stage_0190_Item_00()
  Self.SetObjectiveCompleted(185, True)
  Self.SetObjectiveDisplayed(190, True, False)
  Game.GetPlayer().AddItem(LC030_LockerCode as Form, 1, False)
  CF03_Stage191_Mathis_AfterLogCallout.Start()
EndFunction

Function Fragment_Stage_0195_Item_00()
  Self.SetObjectiveCompleted(190, True)
  Self.SetObjectiveDisplayed(195, True, False)
  Self.SetStage(200)
EndFunction

Function Fragment_Stage_0200_Item_00()
  Self.SetObjectiveCompleted(195, True)
  Self.SetObjectiveDisplayed(200, True, False)
  Game.GetPlayer().AddItem(LC030_VentilationRoomPassword as Form, 1, False)
EndFunction

Function Fragment_Stage_0210_Item_00()
  Self.SetObjectiveCompleted(200, True)
  Self.SetObjectiveDisplayed(210, True, False)
  Alias_CF03_Delgado.GetActorRef().Enable(False)
  Alias_CF03_Delgado.GetActorRef().EvaluatePackage(False)
EndFunction

Function Fragment_Stage_0211_Item_00()
  Actor playerRef = Game.GetPlayer()
  Actor mathisRef = Alias_CF03_Mathis.GetActorRef()
  If !Self.GetStageDone(212) && !playerRef.HasDetectionLOS(mathisRef as ObjectReference) && playerRef.GetDistance(mathisRef as ObjectReference) > 8.0
    If !playerRef.HasDetectionLOS(CF03MathisCatchupArmoryMarker01)
      mathisRef.MoveTo(CF03MathisCatchupArmoryMarker01, 0.0, 0.0, 0.0, True, False)
    ElseIf !playerRef.HasDetectionLOS(CF03MathisCatchupArmoryMarker02)
      mathisRef.MoveTo(CF03MathisCatchupArmoryMarker02, 0.0, 0.0, 0.0, True, False)
    EndIf
    mathisRef.StopCombat()
    mathisRef.EvaluatePackage(False)
  EndIf
  If !Self.GetStageDone(214)
    CF03_Stage211_Mathis_ArmoryScene.Start()
  EndIf
EndFunction

Function Fragment_Stage_0213_Item_00()
  ObjectReference weaponCaseRef = Alias_CF03_ArmoryWeaponCase.GetRef()
  weaponCaseRef.Unlock(False)
  weaponCaseRef.RemoveAllItems(None, False, False)
  weaponCaseRef.BlockActivation(False, False)
  Alias_CF03_ArmoryWeaponCaseCollision.GetRef().DisableNoWait(False)
  Actor mathisRef = Alias_CF03_Mathis.GetActorRef()
  mathisRef.AddItem(CF03_LLI_MathisMagStorm as Form, 1, False)
  mathisRef.AddItem(CF03_LLI_MathisMagStormAmmo as Form, 1, False)
  mathisRef.EquipItem(MagStorm as Form, True, False)
EndFunction

Function Fragment_Stage_0214_Item_00()
  CF03_Stage211_Mathis_ArmoryScene.Stop()
EndFunction

Function Fragment_Stage_0215_Item_00()
  Actor playerRef = Game.GetPlayer()
  Actor mathisRef = Alias_CF03_Mathis.GetActorRef()
  If !playerRef.HasDetectionLOS(mathisRef as ObjectReference) && !playerRef.HasDetectionLOS(CF03MathisCatchupBarracksMarker) && playerRef.GetDistance(mathisRef as ObjectReference) > 8.0
    mathisRef.MoveTo(CF03MathisCatchupBarracksMarker, 0.0, 0.0, 0.0, True, False)
  EndIf
  LC030.SetStage(520)
  CF03_Stage215_Mathis_BarracksCreatureRush.Start()
EndFunction

Function Fragment_Stage_0218_Item_00()
  If !Self.GetStageDone(219)
    CF03_Stage219_Delgado_WardenPACallout.Start()
  EndIf
EndFunction

Function Fragment_Stage_0219_Item_00()
  CF03_Stage219_Delgado_WardenPACallout.Stop()
  CF03_Stage220_Mathis_WardenOfficeCallout.Stop()
EndFunction

Function Fragment_Stage_0220_Item_00()
  Self.SetObjectiveCompleted(210, True)
  Self.SetObjectiveDisplayed(220, True, False)
  Alias_CF03_Mathis.GetActorRef().StopCombat()
  Alias_CF03_Mathis.GetActorRef().StopCombatAlarm()
  Actor mathisRef = Alias_CF03_Mathis.GetActorRef()
  If mathisRef.GetParentCell() == LC030Lock01
    mathisRef.MoveTo(CF03MathisStartAtWarden, 0.0, 0.0, 0.0, True, False)
  EndIf
  SQ_Followers.SetRoleInactive(Alias_CF03_Mathis.GetActorRef(), True, False, True)
  Alias_CF03_Mathis.GetActorRef().EvaluatePackage(False)
  Utility.Wait(3.0)
  If Self.GetStageDone(219) == False
    CF03_Stage220_Mathis_WardenOfficeCallout.Start()
  EndIf
EndFunction

Function Fragment_Stage_0230_Item_00()
  Alias_CF03_Delgado.GetActorRef().EvaluatePackage(False)
  Alias_CF03_Mathis.GetActorRef().EvaluatePackage(False)
  Self.SetStage(240)
EndFunction

Function Fragment_Stage_0235_Item_00()
  Alias_CF03_Delgado.GetActorRef().Disable(False)
  Alias_CF03_Delgado.GetActorRef().MoveTo(CF03DelgadoWrapUpMarker, 0.0, 0.0, 0.0, True, False)
EndFunction

Function Fragment_Stage_0240_Item_00()
  Self.SetObjectiveCompleted(220, True)
  Self.SetObjectiveDisplayed(240, True, False)
EndFunction

Function Fragment_Stage_0240_Item_01()
  Self.SetObjectiveCompleted(220, True)
  Self.SetObjectiveDisplayed(240, True, False)
EndFunction

Function Fragment_Stage_0250_Item_00()
  Self.SetObjectiveCompleted(240, True)
  Self.SetObjectiveDisplayed(250, True, False)
  SQ_Followers.SetRoleActive(Alias_CF03_Mathis.GetActorRef(), True, True, 0.0, 0.0)
  SQ_Followers.CommandFollow(Alias_CF03_Mathis.GetActorRef())
  LC030.SetStage(630)
EndFunction

Function Fragment_Stage_0260_Item_00()
  LC030.SetStage(640)
  Utility.Wait(1.0)
  Self.SetObjectiveCompleted(250, True)
  Self.SetObjectiveDisplayed(260, True, False)
  If Self.GetStageDone(235) == False
    Alias_CF03_Delgado.GetActorRef().Disable(False)
    Alias_CF03_Delgado.GetActorRef().MoveTo(CF03DelgadoWrapUpMarker, 0.0, 0.0, 0.0, True, False)
  EndIf
EndFunction

Function Fragment_Stage_0270_Item_00()
  CF03_Stage270_ShuttleAnnounceScene.Start()
  LC030.SetStage(631)
  Int I = 0
  Int failsafe = 50
  While I < failsafe && !BE_CF03_Shuttle.IsRunning()
    Utility.Wait(0.100000001)
    I += 1
  EndWhile
  BE_CF03_Shuttle.SetEnemyShipLandingRampsOpenState(True)
  Alias_CF03_Shuttle.GetShipRef().RemoveKeyword(SpaceshipPreventRampOpenOnLanding)
  Self.SetObjectiveCompleted(260, True)
  Self.SetStage(310)
EndFunction

Function Fragment_Stage_0310_Item_00()
  Self.SetObjectiveCompleted(250, True)
  Self.SetObjectiveDisplayed(310, True, False)
  Alias_CF03_Delgado.GetActorRef().Enable(False)
  Alias_CF03_Delgado.GetActorRef().MoveTo(CF03DelgadoWrapUpMarker, 0.0, 0.0, 0.0, True, False)
  Alias_CF03_Delgado.GetActorRef().EvaluatePackage(False)
  Alias_CF03_Naeva.GetActorRef().Enable(False)
  Alias_CF03_Naeva.GetActorRef().MoveTo(CF03NaevaWrapUpMarker, 0.0, 0.0, 0.0, True, False)
  Alias_CF03_Naeva.GetActorRef().EvaluatePackage(False)
EndFunction

Function Fragment_Stage_0315_Item_00()
  Self.SetObjectiveCompleted(310, True)
  Self.SetObjectiveDisplayed(315, True, False)
  If Self.IsObjectiveDisplayed(171) == True
    Self.SetObjectiveDisplayed(171, False, False)
  EndIf
  Actor mathisRef = Alias_CF03_Mathis.GetActorRef()
  If mathisRef.GetItemCount(Spacesuit_CrimsonFleet_Assault_Helmet_NOTPLAYABLE as Form) == 0
    mathisRef.AddItem(Spacesuit_CrimsonFleet_Assault_Helmet_NOTPLAYABLE as Form, 1, False)
    mathisRef.SetOutfit(Outfit_Spacesuit_Elite_CF03_MathisCastillo, True)
  EndIf
EndFunction

Function Fragment_Stage_0320_Item_00()
  Self.SetObjectiveCompleted(315, True)
  Self.SetObjectiveDisplayed(320, True, False)
  SQ_Followers.SetRoleInactive(Alias_CF03_Mathis.GetActorRef(), True, False, True)
  Alias_CF03_Mathis.GetActorRef().EvaluatePackage(False)
  LC030.SwapOutShuttle()
  LC030.SetStage(1000)
EndFunction

Function Fragment_Stage_0330_Item_00()
  Game.GetPlayer().RemoveItem(Alias_CF03_KryxSlate.GetRef() as Form, 1, False, None)
EndFunction

Function Fragment_Stage_0335_Item_00()
  Game.GetPlayer().AddItem(LL_Weapon_Reward_CF03_Kryx as Form, 1, False)
EndFunction

Function Fragment_Stage_0340_Item_00()
  Self.SetObjectiveCompleted(320, True)
  Self.SetObjectiveDisplayed(340, True, False)
  Alias_CF03_Delgado.GetActorRef().EvaluatePackage(False)
  Alias_CF03_Naeva.GetActorRef().EvaluatePackage(False)
  Alias_CF03_Mathis.GetRef().MoveTo(CF03MathisWrapUpMarker, 0.0, 0.0, 0.0, True, False)
EndFunction

Function Fragment_Stage_0360_Item_00()
  CrimsonFleetCaptainState_Mathis.SetValue(1.0)
EndFunction

Function Fragment_Stage_0364_Item_00()
  Self.SetObjectiveCompleted(340, True)
  If Self.GetStageDone(365) == True
    Self.SetStage(370)
  ElseIf Self.GetStageDone(365) == False
    Self.SetObjectiveDisplayed(365, True, False)
  EndIf
EndFunction

Function Fragment_Stage_0365_Item_00()
  If Self.GetStageDone(364) == False
    
  ElseIf Self.GetStageDone(364) == True
    Self.SetStage(370)
  EndIf
EndFunction

Function Fragment_Stage_0370_Item_00()
  If Self.IsObjectiveDisplayed(365) == True
    Self.SetObjectiveCompleted(365, True)
  EndIf
  Self.SetObjectiveDisplayed(370, True, False)
EndFunction

Function Fragment_Stage_0410_Item_00()
  If CF_SysDefShutdown.GetValue() == 0.0
    Self.SetObjectiveCompleted(370, True)
    Self.SetObjectiveDisplayed(410, True, False)
    Alias_CF03_Kibwe.GetActorRef().Enable(False)
    Alias_CF03_Kibwe.GetActorRef().MoveTo(CF03KibweWrapUpMarker, 0.0, 0.0, 0.0, True, False)
    Alias_CF03_Kibwe.GetActorRef().EvaluatePackage(False)
    Alias_CF03_Toft.GetActorRef().Enable(False)
    Alias_CF03_Toft.GetActorRef().MoveTo(CF03ToftWrapUpMarker, 0.0, 0.0, 0.0, True, False)
    Alias_CF03_Toft.GetActorRef().EvaluatePackage(False)
  ElseIf CF_SysDefShutdown.GetValue() == 1.0
    Self.SetObjectiveCompleted(370, True)
    Self.SetStage(1000)
  EndIf
EndFunction

Function Fragment_Stage_0420_Item_00()
  Self.SetObjectiveCompleted(410, True)
  Self.SetObjectiveDisplayed(420, True, False)
EndFunction

Function Fragment_Stage_1000_Item_00()
  Alias_CF03_Mathis.GetActorRef().UnequipItem(MagStorm as Form, False, False)
  Actor mathisRef = Alias_CF03_Mathis.GetActorRef()
  If mathisRef.GetItemCount(Spacesuit_CrimsonFleet_Assault_Helmet_NOTPLAYABLE as Form) == 0
    mathisRef.AddItem(Spacesuit_CrimsonFleet_Assault_Helmet_NOTPLAYABLE as Form, 1, False)
    mathisRef.SetOutfit(Outfit_Spacesuit_Elite_CF03_MathisCastillo, True)
  EndIf
  If Self.IsObjectiveDisplayed(420) == True
    Self.SetObjectiveCompleted(420, True)
  EndIf
  LC082.UpdateVigilanceLocation("CF04")
  CF04.SetStage(15)
  If Self.GetStageDone(360)
    Float currentGameTime = Utility.GetCurrentGameTime()
    SE_Player_FAB20_Timestamp.SetValue(currentGameTime + cooldownDays)
  EndIf
  Self.Stop()
EndFunction
